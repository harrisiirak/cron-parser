!function(e,t){var n=t();"undefined"!=typeof module&&module.exports&&(module.exports=n),"undefined"!=typeof window&&this===window&&(window.CronParser=n)}(this,function(){"use strict";Date.prototype.addYear=function(){this.setFullYear(this.getFullYear()+1)},Date.prototype.addMonth=function(){this.setMonth(this.getMonth()+1),this.setDate(1),this.setHours(0),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addDay=function(){this.setDate(this.getDate()+1),this.setHours(0),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addHour=function(){this.setHours(this.getHours()+1),this.setMinutes(0),this.setSeconds(0)},Date.prototype.addMinute=function(){this.setMinutes(this.getMinutes()+1),this.setSeconds(0)},Date.prototype.addSecond=function(){this.setSeconds(this.getSeconds()+1)};var e;!function(){e=function(t,n){this._options=n,this._currentDate=new Date(n.currentDate.toUTCString()),this._endDate=n.endDate?new Date(n.endDate.toUTCString()):null,this._fields={};for(var r=0,a=e.map.length;a>r;r++){var i=e.map[r];this._fields[i]=t[r]}},e.map=["second","minute","hour","dayOfMonth","month","dayOfWeek"],e.predefined={"@yearly":"0 0 1 1 *","@monthly":"0 0 1 * *","@weekly":"0 0 * * 0","@daily":"0 0 * * *","@hourly":"0 * * * *"},e.constraints=[[0,59],[0,59],[0,23],[1,31],[1,12],[0,6]],e.aliases={month:{jan:1,feb:2,mar:3,apr:4,may:5,jun:6,jul:7,aug:8,sep:9,oct:10,nov:11,dec:12},dayOfWeek:{sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6}},e.parseDefaults=["0","*","*","*","*","*"],e._parseField=function(t,n,r){function a(t){function n(t){var n=a.length>0?Math.max.apply(Math,a):-1;if(t instanceof Array)t.forEach(function(t){if(!e._validateConstraint(t,r))throw new Error("Constraint error, got value "+t+" expected range "+r[0]+"-"+r[1]);t>n&&a.push(t),n=Math.max.apply(Math,a)});else{if(t=parseInt(t,10),!e._validateConstraint(t,r))throw new Error("Constraint error, got value "+t+" expected range "+r[0]+"-"+r[1]);t>n&&a.push(t)}}var a=[];if(-1!==t.indexOf(",")){var s=t.split(",");s.forEach(function(e){n(i(e.toString()))})}else n(i(t));return a}function i(e){var t=1;if(-1!==e.indexOf("/")){var n=e.split("/");return t=n[n.length-1],s(n[0],t)}return s(e,t)}function s(e,t){var n=[];if(-1!==e.indexOf("-")){var a=e.split("-");if(2!=a.length)throw new Error("Invalid range format: "+e);var i=parseInt(a[0],10),s=parseInt(a[1],10);if(Number.isNaN(i)||Number.isNaN(s)||i<r[0]||s>r[1])throw new Error("Constraint error, got range "+i+"-"+s+" expected range "+r[0]+"-"+r[1]);if(i>=s)throw new Error("Invalid range: "+e);for(var o=t,u=i,h=s;h>=u;u++)o>0&&o%t===0?(o=1,n.push(u)):o++;return n}return e}switch(t){case"month":case"dayOfWeek":var o=e.aliases[t];n=n.replace(/[a-z]{1,3}/gi,function(e){if(e=e.toLowerCase(),o[e])return o[e];throw new Error('Cannot resolve alias "'+e+'"')})}if(!e._validateCharacters(n))throw new Error("Invalid characters, got value: "+n);return-1!==n.indexOf("*")&&(n=n.replace(/\*/g,r[0]+"-"+r[1])),a(n)},e._isWildcardRange=function(e,t){return e instanceof Array?2!==t.length?!1:e.length===t[1]-(t[0]<1?-1:0):!1},e._matchSchedule=function(e,t){for(var n=0,r=t.length;r>n;n++)if(t[n]>=e)return t[n]===e;return t[0]===e},e._validateCharacters=function(e){var t=new RegExp("^[\\d|/|*|\\-|,]+$");return t.test(e)},e._validateConstraint=function(e,t){return e<t[0]||e>t[1]?!1:!0},e._validateTimespan=function(e,t){return t&&t.getTime()-e.getTime()<0?!1:!0},e.prototype._findSchedule=function(){if(!e._validateTimespan(this._currentDate,this._endDate))throw new Error("Out of the timespan range");var t=new Date(this._currentDate.toUTCString());for(1===this._fields.second.length&&0===this._fields.second[0]?t.addMinute():t.addSecond();;){if(!e._validateTimespan(t,this._endDate))throw new Error("Out of the timespan range");if(e._matchSchedule(t.getMonth()+1,this._fields.month)){var n=e._matchSchedule(t.getDate(),this._fields.dayOfMonth),r=e._matchSchedule(t.getDay(),this._fields.dayOfWeek),a=e._isWildcardRange(this._fields.dayOfMonth,e.constraints[3]),i=e._isWildcardRange(this._fields.dayOfWeek,e.constraints[5]);if(a||!i||n)if(!a||i||r)if(a&&i||n||r)if(e._matchSchedule(t.getHours(),this._fields.hour))if(e._matchSchedule(t.getMinutes(),this._fields.minute)){if(e._matchSchedule(t.getSeconds(),this._fields.second))break;t.addSecond()}else t.addMinute();else t.addHour();else t.addDay();else t.addDay();else t.addDay()}else t.addMonth()}return this._currentDate=t},e.prototype.next=function(){return this._findSchedule()},e.prototype.hasNext=function(){var e=this._currentDate;try{return this.next(),!0}catch(t){return!1}finally{this._currentDate=e}},e.prototype.iterate=function(e,t){for(var n=[],r=0,a=e;a>r;r++)try{var i=this.next();n.push(i),t&&t(i,r)}catch(s){break}return n},e.prototype.reset=function(){this._currentDate=new Date(this._options.currentDate.toUTCString())},e.parse=function t(n,r,a){function t(t,n){n||(n={}),n.currentDate||(n.currentDate=new Date),e.predefined[t]&&(t=e.predefined[t]);for(var r=[],a=t.split(" "),i=e.map.length-a.length,s=0,o=e.map.length;o>s;++s){var u=e.map[s],h=a[a.length>o?s:s-i];r.push(i>s||!h?e._parseField(u,e.parseDefaults[s],e.constraints[s]):e._parseField(u,h,e.constraints[s]))}return new e(r,n)}if("function"==typeof r&&(a=r,r={}),"function"!=typeof a)return t(n,r);try{return a(null,t(n,r))}catch(i){return a(i)}}}();var t;return function(){t=function(){},t._parseEntry=function(t){var n=t.split(" ");if(6===n.length)return{interval:e.parse(t)};if(n.length>6)return{interval:e.parse(t),command:n.slice(6,n.length)};throw new Error("Invalid entry: "+t)},t.parseExpression=function(t,n,r){return e.parse(t,n,r)},t.parseExpressionSync=t.parseExpression,t.parseString=function(e){for(var t=this,n=e.split("\n"),r={variables:{},expressions:[],errors:{}},a=0,i=n.length;i>a;a++){var s=n[a],o=null,u=s.replace(/^\s+|\s+$/g,"");if(u.length>0){if(u.match(/^#/))continue;if(o=u.match(/^(.*)=(.*)$/))r.variables[o[1]]=o[2];else{var h=null;try{h=t._parseEntry("0 "+u),r.expressions.push(h.interval)}catch(d){r.errors[u]=d}}}}return r},t.parseFile=function(e,n){require("fs").readFile(e,function(e,r){return e?void n(e):n(null,t.parseString(r.toString()))})}}(),t});
//# sourceMappingURL=cron-parser.min.js.map